<header id="header" class="header fixed-top">

<div class="topbar d-flex align-items-center">
    <div class="container d-flex justify-content-center justify-content-md-between">
    <div class="contact-info d-flex align-items-center">
        <i class="bi bi-envelope d-flex align-items-center"><a href="mailto:barbsdogrescue@gmail.com">barbsdogrescue@gmail.com</a></i>
        <i class="bi bi-geo-alt d-flex align-items-center ms-4"><span>Rocky Point, Mexico</span></i>
    </div>
    <div class="social-links d-none d-md-flex align-items-center">
        <a href="https://www.facebook.com/BarbsDogRescue/" target="_blank" class="facebook"><i class="bi bi-facebook"></i></a>
        <a href="https://www.instagram.com/barbsdogrescue/" target="_blank" class="instagram"><i class="bi bi-instagram"></i></a>
        <a href="https://www.tiktok.com/@barbsdogrescue" target="_blank" class="tiktok"><i class="bi bi-tiktok"></i></a>
    </div>
    </div>
</div><!-- End Top Bar -->

<div class="branding d-flex align-items-center">

    <div class="container position-relative d-flex align-items-center justify-content-between">
    <a href="{{ url_for('home.home') }}" class="logo d-flex align-items-center">
        <img src="{{ url_for('static', filename='img/barbs-logo.png') }}" alt="Barb's Dog Rescue Logo" class="logo-img">
        <h1 class="sitename">Barb's Dog Rescue</h1>
    </a>

    {% set nav_items = [
        ("Home", "home.home"),
        ("About Us", "about.about"),
        ("Donate", "donate.donate"),
        ("Shop", "shop.shop"),
        ("Adopt", "adopt.special"),
        ("Volunteer", "volunteer.volunteer"),
        ("Contact", "contact.contact")
    ] %}

    {% set current_endpoint = request.endpoint %}
    <nav id="navmenu" class="navmenu">
      <ul>
        <li class="d-xl-none" style="position:sticky;top:0;z-index:1051;background:#fff;display:flex;justify-content:flex-end;align-items:center;">
          <button type="button" class="mobile-nav-close btn p-0 me-2 mt-1" aria-label="Close navigation" style="background:transparent;border:none;">
            <i class="bi bi-x" style="font-size:2rem;"></i>
          </button>
        </li>
        {% for index in range(nav_items|length) %}
            {% set label, target = nav_items[index] %}
            
            {% if label == "Adopt" %}
                {# Special handling for Adopt dropdown #}
                <li class="dropdown adopt-dropdown">
                    <a href="javascript:void(0)" 
                       class="{{ 'active' if current_endpoint and current_endpoint.startswith('adopt.') else '' }}">
                        <span>Adopt</span><i class="bi bi-chevron-down d-none d-xl-inline-block ms-1"></i>
                    </a>
                    <i class="bi bi-chevron-down toggle-dropdown"></i>
                    <ul>
                        <li>
                            <a href="{{ url_for('adopt.adopt_page') }}" 
                               class="{{ 'active' if current_endpoint == 'adopt.adopt' else '' }}">
                                Available Dogs
                            </a>
                        </li>
                        <li>
                            <a href="{{ url_for('adopt.vacation') }}"
                               class="{{ 'active' if current_endpoint == 'adopt.vacation' else '' }}">
                                Take a BDR Dog on Vacation
                            </a>
                        </li>
                        <li>
                            <a href="{{ url_for('adopt.adoption_events') }}"
                               class="{{ 'active' if current_endpoint == 'adopt.adoption_events' else '' }}">
                                Adoption Events
                            </a>
                        </li>
                    </ul>
                </li>
            {% else %}
                {# Display regular nav item #}
                {% if target.startswith('#') %}
                    {# Anchor links handled by request.path comparison if you want #}
                    <li>
                    <a href="{{ target }}"
                        class="{{ 'active' if request.path == '/' + target else '' }}">
                        {{ label }}
                    </a>
                    </li>
                {% else %}
                    <li>
                    <a href="{{ url_for(target) }}"
                        class="{{ 'active' if current_endpoint == target else '' }}">
                        {{ label }}
                    </a>
                    </li>
                {% endif %}
            {% endif %}
        {% endfor %}
    </ul>
    <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
    </nav>

    </div>

</div>

</header>